// ============================================================
// LAFA i18n — Lightweight Translation System
// Single file: dictionary, engine, toggle UI
// ============================================================

(function () {
  'use strict';

  // ---------- Language State ----------
  const STORAGE_KEY = 'lafa-lang';
  let currentLang = 'es';
  try { currentLang = localStorage.getItem(STORAGE_KEY) || 'es'; } catch (_) {}

  // ---------- Dictionary ----------
  const I18N = {
    es: {
      // ---- Shared (sidebar, nav, status, time, notifications, header) ----
      'shared.sidebar.roadmap': 'Roadmap',
      'shared.sidebar.dashboard': 'Dashboard',
      'shared.sidebar.collections': 'Cobranza',
      'shared.sidebar.battery': 'Baterías',
      'shared.sidebar.onboarding': 'Onboarding',
      'shared.sidebar.fleetmap': 'Mapa de Flota',
      'shared.sidebar.back': 'Volver a LAFA',
      'shared.nav.home': 'Inicio',
      'shared.status.active': 'Activo',
      'shared.status.maintenance': 'Mantenimiento',
      'shared.status.charging': 'Cargando',
      'shared.status.idle': 'Inactivo',
      'shared.status.onTime': 'A tiempo',
      'shared.status.late': 'Tarde',
      'shared.status.default': 'Impago',
      'shared.time.today': 'Hoy',
      'shared.time.yesterday': 'Ayer',
      'shared.time.daysAgo': 'Hace {n} días',
      'shared.time.weeksAgo': 'Hace {n} sem',
      'shared.time.monthsAgo': 'Hace {n} mes{plural}',
      'shared.weekAbbr': 'Sem {n}',
      'shared.notif.title': 'Notificaciones',
      'shared.notif.markAll': 'Marcar todo como leído',
      'shared.notif.fleet.title': 'Utilización cayó a {pct}%',
      'shared.notif.fleet.desc': '{n} vehículos inactivos de {total}.',
      'shared.notif.fleet.time': 'Hace 3h',
      'shared.notif.payment.title': 'Cobranza renegociada',
      'shared.notif.payment.desc': 'Carlos Mendoza aceptó plan parcial — $2,100 MXN recibidos, $2,150 pendiente lunes.',
      'shared.notif.payment.time': 'Hace 5h',
      'shared.notif.alert.title': '{n} anomalías de batería',
      'shared.notif.alert.desc': '{id} peor caso — SOH {soh}%. Ver tabla de diagnóstico.',
      'shared.notif.alert.time': 'Hace 2h',
      'shared.notif.onboarding.title': 'Nuevo conductor pendiente',
      'shared.notif.onboarding.desc': '{name} — documentos por verificar.',
      'shared.notif.onboarding.time': 'Hace 6h',
      'shared.showing': 'Mostrando {from}–{to} de {total}',

      // ---- Landing page ----
      'landing.nav.problem': 'El Problema',
      'landing.nav.roadmap': 'Roadmap',
      'landing.nav.prototypes': 'Prototipos',
      'landing.nav.about': 'Sobre Jose',
      'landing.nav.cta': 'Ver Roadmap',
      'landing.nav.mobileCta': 'Ver Demos',
      'landing.hero.eyebrow': 'AI Product Engineer — Herramientas Internas',
      'landing.hero.title': 'De Spreadsheets a Plataforma.<span class="block text-lafa-orange">En 9 Meses.</span>',
      'landing.hero.titleText': 'De Spreadsheets a Plataforma.',
      'landing.hero.titleHighlight': 'En 9 Meses.',
      'landing.hero.subtitle': 'LAFA gestiona 150 EVs con hojas de cálculo. Escalar a 2,000 requiere una capa tecnológica que hoy no existe. Diseñé un roadmap de 16 proyectos en 3 tracks — y construí 6 prototipos funcionales para demostrarlo.',
      'landing.hero.ctaPrimary': 'Ver el Roadmap',
      'landing.hero.ctaSecondary': 'Explorar Prototipos',
      'landing.hero.imgAlt': 'Vehículo eléctrico LAFA',
      'landing.problem.eyebrow': 'El Problema',
      'landing.problem.title': 'Todo es Spreadsheets',
      'landing.problem.subtitle': 'LAFA parte de cero. Cada proceso que necesita escalar 15x en un año es manual hoy.',
      'landing.problem.card1.title': 'Sin Base de Datos',
      'landing.problem.card1.desc': 'Conductores, vehículos, pagos, mantenimiento — todo en spreadsheets separados. Sin fuente de verdad. Sin dashboard.',
      'landing.problem.card2.title': 'Todo es Manual',
      'landing.problem.card2.desc': 'Onboarding toma 48+ horas. Cobranza requiere una persona por conductor. Dispatch en grupos de WhatsApp. Mantenimiento sin tracking.',
      'landing.problem.card3.title': 'Sin Datos para Decidir',
      'landing.problem.card3.desc': 'Degradación de batería sin medir. Riesgo crediticio sin evaluar. Costos de carga sin optimizar. Decisiones por intuición.',
      'landing.roadmap.eyebrow': 'El Plan',
      'landing.roadmap.title': '3 Tracks. 16 Proyectos. 9 Meses.',
      'landing.roadmap.subtitle': 'Infraestructura primero. AI después. Cada proyecto mueve una métrica financiera.',
      'landing.roadmap.foundation': 'Foundation',
      'landing.roadmap.dae': 'Driver-as-Employee',
      'landing.roadmap.lto': 'Lease-to-Own',
      'landing.roadmap.cta': 'Explorar el Roadmap Interactivo',
      'landing.roadmap.phase0': 'Fase 0 — Mes 1-2',
      'landing.roadmap.phase1': 'Fase 1 — Mes 3-5',
      'landing.roadmap.phase2': 'Fase 2 — Mes 7-14',
      'landing.roadmap.milestone1': '300 EVs — Base Digital',
      'landing.roadmap.milestone2': '750 EVs — Escala',
      'landing.roadmap.milestone3': '1,500 EVs — Motor $',
      'landing.roadmap.milestone4': '2,000 — Completo',
      'landing.roadmap.db': 'Base de datos relacional',
      'landing.roadmap.dashboardV1': 'Dashboard operativo v1',
      'landing.roadmap.maint': 'Sistema de mantenimiento',
      'landing.roadmap.shiftDisp': 'Dispatch de turnos',
      'landing.roadmap.acctStmt': 'Estados de cuenta',
      'landing.roadmap.incidents': 'Gestión de incidentes',
      'landing.roadmap.insurance': 'Integración seguros',
      'landing.roadmap.hrPayroll': 'Nómina y asistencia',
      'landing.roadmap.onboardAI': 'Onboarding automatizado',
      'landing.roadmap.batteryMon': 'Monitor de batería',
      'landing.roadmap.collectionsBot': 'Bot de cobranza AI',
      'landing.roadmap.creditScore': 'Scoring crediticio',
      'landing.roadmap.chargingOpt': 'Optimización de carga',
      'landing.roadmap.dashV2Docs': 'Dashboard v2, Docs, Knowledge',
      'landing.tools.eyebrow': 'Prototipos Funcionales',
      'landing.tools.title': '1 Roadmap. 5 Prototipos Funcionales.',
      'landing.tools.subtitle': 'Cada prototipo demuestra una capacidad del roadmap. Click para explorar.',
      'landing.tools.open': 'Abrir',
      'landing.tools.roadmap.title': 'AI Roadmap Interactivo',
      'landing.tools.roadmap.desc': 'Timeline interactivo: 16 proyectos, deep-dives de arquitectura, dependencias, milestones de crecimiento.',
      'landing.tools.roadmap.stat': '16 proyectos mapeados',
      'landing.tools.dashboard.title': 'Dashboard de Flota',
      'landing.tools.dashboard.desc': '4 KPIs, tendencias de ingreso, estado de flota por OEM, tracking de pagos, 150 conductores mock.',
      'landing.tools.dashboard.stat': 'Horas → ~10 segundos',
      'landing.tools.collections.title': 'Bot de Cobranza WhatsApp',
      'landing.tools.collections.desc': 'Simulación WhatsApp: 3 escenarios, clasificación de intención con AI, scoring de riesgo, escalamiento.',
      'landing.tools.collections.stat': '8–10 agentes → 2–3',
      'landing.tools.battery.title': 'Monitor de Baterías',
      'landing.tools.battery.desc': 'Heatmap SOH, proyección de degradación, patrones de carga, detección de anomalías, valor residual.',
      'landing.tools.battery.stat': 'Protege MXN $60–80M',
      'landing.tools.onboarding.title': 'Onboarding de Conductores',
      'landing.tools.onboarding.desc': 'Pipeline Kanban, verificación de documentos con OCR, scoring crediticio, flujo WhatsApp.',
      'landing.tools.onboarding.stat': '48 horas → ~7 minutos',

      // ---- Fleet Intelligence section ----
      'landing.nav.fleetIntel': 'Fleet Intelligence',
      'landing.fi.eyebrow': 'Producto Funcional',
      'landing.fi.title': 'Fleet Intelligence MVP',
      'landing.fi.subtitle': 'App de gestión de flota en producción: turnos, nómina, conductores, vehículos, RBAC — construida con React, TypeScript y Supabase.',
      'landing.fi.stat.drivers': 'conductores',
      'landing.fi.stat.vehicles': 'vehículos',
      'landing.fi.stat.centers': 'centros',
      'landing.fi.feat.dashboard': 'Dashboard operativo en tiempo real',
      'landing.fi.feat.payroll': 'Cálculo de nómina automatizado',
      'landing.fi.feat.shifts': 'Gestión de turnos con check-in/out',
      'landing.fi.feat.rbac': 'Control de acceso por roles (RBAC)',
      'landing.fi.feat.csv': 'Importación masiva por CSV',
      'landing.fi.cta': 'Probar Demo en Vivo',
      'landing.fi.credentials': 'admin@lafa.mx / admin123',
      'landing.fi.tab.dashboard': 'Dashboard',
      'landing.fi.tab.shifts': 'Turnos',
      'landing.fi.tab.payroll': 'Nómina',

      'landing.about.eyebrow': 'El Builder',
      'landing.about.title': 'Jose Diaz',
      'landing.about.subtitle': 'Producto + AI + Ejecución Rápida',
      'landing.about.yape.title': 'Yape — AI a Escala',
      'landing.about.yape.desc': 'Pipeline de clasificación AI: 300K conversaciones WhatsApp/mes. Error reducido de 30% a 10%. Pipeline completo desde estrategia de datos hasta producción.',
      'landing.about.jokr.title': 'JOKR — Internal Tools & Data',
      'landing.about.jokr.desc': 'PM de JOKR Perú — Consumer App & Internal Tools en unicornio de delivery ($260M Serie B). Lideré migración de Data Warehouse (Snowflake → BigQuery) con Data Engineers. Integración MarTech (GA, Adjust, Salesforce, Talon.One).',
      'landing.about.numa.title': 'NUMA — Builder Full-Stack',
      'landing.about.numa.desc': 'Asistente de salud con AI construido solo desde cero. Diseño de producto, backend, integración AI, deploy. No es un deck — es un producto funcionando.',
      'landing.about.facts': 'Key Facts',
      'landing.about.education': 'Formación',
      'landing.about.educationVal': 'Administración de Empresas (UP)',
      'landing.about.current': 'Actual',
      'landing.about.currentVal': 'Product Owner en Yape',
      'landing.about.ai': 'AI',
      'landing.about.aiVal': 'Reforge AI Leadership & Strategy (2025)',
      'landing.about.stack': 'Stack',
      'landing.about.stackVal': 'Claude Code, Supabase, Vercel, PostHog, Linear, Cursor',
      'landing.about.quote': '"El gusto es el cuello de botella cuando la IA puede generar opciones ilimitadas" — Lenny Rachitsky',
      'landing.cta.title': '¿Listos para salir de los Spreadsheets?',
      'landing.cta.subtitle': 'Explora el roadmap, prueba los prototipos, o hablemos.',
      'landing.cta.primary': 'Ver el Roadmap',
      'landing.cta.secondary': 'Escríbeme',
      'landing.footer.credit': 'Hecho por Jose Diaz · Febrero 2026',
      'landing.footer.context': 'Investigación y prototipos para el rol de AI Product Engineer en LAFA',

      // ---- Dashboard ----
      'dashboard.title': 'Dashboard de Operaciones',
      'dashboard.kpi.vehicles': 'Vehículos Activos',
      'dashboard.kpi.vehiclesTrend': '+8 esta sem',
      'dashboard.kpi.revenue': 'Ingreso Semanal',
      'dashboard.kpi.revenueTrend': '+12.3%',
      'dashboard.kpi.utilization': 'Utilización Flota',
      'dashboard.kpi.payments': 'Pagos A Tiempo',
      'dashboard.chart.revenue': 'Ingreso Semanal (12 semanas)',
      'dashboard.chart.fleetStatus': 'Estado de Flota',
      'dashboard.chart.payments': 'Estado de Pagos (12 semanas)',
      'dashboard.chart.oem': 'Distribución por Fabricante',
      'dashboard.chart.total': 'Total',
      'dashboard.filter.allOem': 'Todos OEM',
      'dashboard.filter.allProducts': 'Todos Productos',
      'dashboard.filter.allStatus': 'Todos Estados',
      'dashboard.filter.active': 'Activo',
      'dashboard.filter.maintenance': 'Mantenimiento',
      'dashboard.filter.charging': 'Cargando',
      'dashboard.filter.idle': 'Inactivo',
      'dashboard.search': 'Buscar conductor o vehículo...',
      'dashboard.export': 'Exportar',
      'dashboard.table.id': 'ID',
      'dashboard.table.driver': 'Conductor',
      'dashboard.table.oem': 'OEM',
      'dashboard.table.product': 'Producto',
      'dashboard.table.status': 'Estado',
      'dashboard.table.platform': 'Plataforma',
      'dashboard.table.revenue': 'Ingreso/Sem',
      'dashboard.table.soh': 'SOH',
      'dashboard.detail.driver': 'Conductor',
      'dashboard.detail.vehicle': 'Vehículo',
      'dashboard.detail.product': 'Producto',
      'dashboard.detail.since': 'Desde',
      'dashboard.detail.rating': 'Rating',
      'dashboard.detail.trips': 'Viajes',
      'dashboard.detail.oem': 'OEM',
      'dashboard.detail.model': 'Modelo',
      'dashboard.detail.status': 'Estado',
      'dashboard.detail.soh': 'SOH',
      'dashboard.detail.cycles': 'Ciclos',
      'dashboard.detail.avgTemp': 'Temp Prom',
      'dashboard.detail.weeklyRev': 'Ingreso Semanal',
      'dashboard.detail.lastPayment': 'Último pago',
      'dashboard.detail.payHistory': 'Historial de Pagos (últimas 8 sem)',
      'dashboard.detail.weekLabel': 'Sem {n}',
      'dashboard.table.showing': 'Mostrando {start}–{end} de {total}',
      'dashboard.donut.active': 'Activo',
      'dashboard.donut.maintenance': 'Mantenimiento',
      'dashboard.donut.charging': 'Cargando',
      'dashboard.donut.idle': 'Inactivo',
      'dashboard.series.onTime': 'A tiempo',
      'dashboard.series.late': 'Tarde',
      'dashboard.series.default': 'Impago',

      // ---- Battery ----
      'battery.title': 'Monitor de Baterías',
      'battery.kpi.avgSoh': 'SOH Promedio',
      'battery.kpi.anomalies': 'Anomalías',
      'battery.kpi.avgTemp': 'Temp Promedio',
      'battery.kpi.avgCycles': 'Ciclos Promedio',
      'battery.filter.allOem': 'Todos OEM',
      'battery.filter.allProducts': 'Todos Productos',
      'battery.filter.sortId': 'Ordenar por ID',
      'battery.filter.sortSoh': 'Ordenar por SOH',
      'battery.filter.sortCycles': 'Ordenar por Ciclos',
      'battery.heatmap.title': 'Mapa de Salud de Flota',
      'battery.heatmap.sohLabel': 'SOH:',
      'battery.heatmap.cycles': '{n} ciclos',
      'battery.detail.degradation': 'Curva de Degradación',
      'battery.detail.chargePattern': 'Patrón de Carga (30 días)',
      'battery.detail.vehicleInfo': 'Información del Vehículo',
      'battery.detail.projections': 'Proyecciones AI',
      'battery.detail.recommendations': 'Recomendaciones',
      'battery.detail.vehicle': 'Vehículo',
      'battery.detail.oemModel': 'OEM / Modelo',
      'battery.detail.driver': 'Conductor',
      'battery.detail.product': 'Producto',
      'battery.detail.status': 'Estado',
      'battery.detail.currentSoh': 'SOH Actual',
      'battery.detail.cycles': 'Ciclos',
      'battery.detail.avgTemp': 'Temp Promedio',
      'battery.detail.projSoh48': 'SOH proyectado (48 meses)',
      'battery.detail.usefulLife': 'Vida útil estimada',
      'battery.detail.residualValue': 'Valor residual batería',
      'battery.detail.secondLife': 'Segunda vida viable',
      'battery.detail.yes': 'Sí',
      'battery.detail.evaluate': 'Evaluar',
      'battery.detail.years68': '6-8 años',
      'battery.detail.years45': '4-5 años',
      'battery.chart.fleetAvg': 'Promedio flota',
      'battery.chart.lfpExpected': 'LFP esperado (CDMX)',
      'battery.chart.months': 'Meses',
      'battery.chart.day': 'Día',
      'battery.chart.charge': 'Carga (kWh)',
      'battery.chart.today': 'Hoy',
      'battery.anomaly.title': 'Alertas de Anomalías',
      'battery.anomaly.priority': 'Prioridad',
      'battery.anomaly.vehicle': 'Vehículo',
      'battery.anomaly.alert': 'Alerta',
      'battery.anomaly.soh': 'SOH',
      'battery.anomaly.expected': 'Esperado',
      'battery.anomaly.deviation': 'Desviación',
      'battery.anomaly.action': 'Acción',
      'battery.anomaly.critical': 'Crítica',
      'battery.anomaly.high': 'Alta',
      'battery.anomaly.medium': 'Media',
      'battery.anomaly.degradation': 'Degradación acelerada detectada',
      'battery.anomaly.diagnose': 'Diagnosticar',
      'battery.rec.fullDiag': 'Programar diagnóstico completo de batería',
      'battery.rec.chargePattern': 'Revisar patrón de carga — evitar carga rápida en horas pico',
      'battery.rec.highCycles': 'Monitorear degradación acelerada por alto ciclaje',
      'battery.rec.optimal': 'Batería en rango óptimo. Continuar monitoreo estándar.',

      // ---- Collections ----
      'collections.title': 'Bot de Cobranza WhatsApp',
      'collections.scenario.cooperative': 'Cooperativo',
      'collections.scenario.cooperativeDesc': 'Quiere pagar, pide plazo',
      'collections.scenario.evasive': 'Evasivo',
      'collections.scenario.evasiveDesc': 'Lee pero no responde',
      'collections.scenario.unresponsive': 'Sin Respuesta',
      'collections.scenario.unresponsiveDesc': 'Ignora todos los mensajes',
      'collections.chat.botActive': 'Bot automático activo...',
      'collections.agent.daysOverdue': 'Días atraso',
      'collections.agent.amountOwed': 'Monto adeudado',
      'collections.agent.rating': 'Rating plat.',
      'collections.agent.escalation': 'Escalamiento',
      'collections.agent.intentTitle': 'Intención (AI)',
      'collections.agent.detected': 'Detectada',
      'collections.agent.waiting': 'Esperando mensaje...',
      'collections.agent.actionLabel': 'Acción',
      'collections.agent.noAction': '—',
      'collections.agent.approve': 'Aprobar',
      'collections.agent.escalate': 'Escalar',
      'collections.agent.legalReview': 'Rev. Legal',
      'collections.agent.payHistory': 'Historial de Pagos',
      'collections.risk.low': 'Riesgo Bajo',
      'collections.risk.medHigh': 'Riesgo Medio-Alto',
      'collections.risk.high': 'Riesgo Alto',
      'collections.daysDelay': '{n} días de retraso',
      'collections.weekLabel': 'Sem {n}',
      'collections.escalation.pre2': 'Día -2',
      'collections.escalation.day0': 'Día 0',
      'collections.escalation.day7': '+7',
      'collections.escalation.day14': '+14',
      'collections.escalation.legal': 'Legal',

      // ---- Onboarding ----
      'onboarding.title': 'Onboarding de Conductores',
      'onboarding.kpi.apps': 'Solicitudes Esta Sem',
      'onboarding.kpi.time': 'Tiempo Promedio',
      'onboarding.kpi.auto': 'Auto-Aprobados',
      'onboarding.kpi.pending': 'Pendientes',
      'onboarding.filter.all': 'Todos',
      'onboarding.search': 'Buscar conductor...',
      'onboarding.col.pending': 'Pendiente',
      'onboarding.col.review': 'En Revisión',
      'onboarding.col.verified': 'Verificado',
      'onboarding.col.approved': 'Aprobado',
      'onboarding.empty': 'Sin conductores en esta etapa',
      'onboarding.docs': 'docs',
      'onboarding.doc.ine': 'INE',
      'onboarding.doc.license': 'Licencia',
      'onboarding.doc.address': 'Comp. Domicilio',
      'onboarding.doc.rfc': 'RFC',
      'onboarding.doc.screenshot': 'Screenshot',
      'onboarding.modal.docs': 'Documentos',
      'onboarding.modal.waChat': 'Conversación WhatsApp',
      'onboarding.modal.ocr': 'Extracción AI (OCR)',
      'onboarding.modal.credit': 'Score Crediticio Alternativo',
      'onboarding.modal.timeline': 'Línea de Tiempo',
      'onboarding.modal.complete': 'Verificación completa — 23 segundos',
      'onboarding.modal.replay': '↻ Reproducir de nuevo',
      'onboarding.modal.withAI': 'con AI',
      'onboarding.modal.oldProcess': 'proceso anterior',
      'onboarding.wa.greeting': 'Hola {name}! Bienvenido al proceso de onboarding de LAFA. Soy el asistente automatizado.',
      'onboarding.wa.docList': 'Para tu solicitud como conductor {product}, necesitamos:\n1. INE\n2. Licencia\n3. Comp. Domicilio\n4. RFC\n5. Screenshot DiDi',
      'onboarding.wa.driverReply': 'Si claro, dame un momento',
      'onboarding.wa.verified': '{doc} verificado ✓',
      'onboarding.wa.allDone': 'Todos los documentos verificados! Tu solicitud está completa.',
      'onboarding.ocr.processing': 'Procesando con AI...',
      'onboarding.ocr.extracting': 'Extrayendo campos de INE',
      'onboarding.ocr.ineTitle': 'INE / Credencial de Elector',
      'onboarding.ocr.name': 'Nombre',
      'onboarding.ocr.curp': 'CURP',
      'onboarding.ocr.address': 'Dirección',
      'onboarding.ocr.validity': 'Vigencia',
      'onboarding.ocr.confidence': '{n}% confianza',
      'onboarding.ocr.validation': 'Validación AI',
      'onboarding.ocr.authentic': 'Documento auténtico',
      'onboarding.ocr.valid': 'VIGENTE',
      'onboarding.ocr.curpValidated': 'CURP validado (RENAPO)',
      'onboarding.ocr.faceMatch': 'Coincidencia foto/rostro',
      'onboarding.ocr.blacklist': 'Lista negra',
      'onboarding.ocr.clean': 'LIMPIO',
      'onboarding.ocr.ltoTitle': 'Evaluación Financiera (LTO)',
      'onboarding.ocr.verifiedIncome': 'Ingresos verificados (Palenca)',
      'onboarding.ocr.altCredit': 'Score crediticio alternativo',
      'onboarding.ocr.payCapacity': 'Capacidad de pago',
      'onboarding.ocr.approved': 'APROBADO',
      'onboarding.ocr.autoApproved': 'Verificación completa — Auto-aprobado',
      'onboarding.ocr.processTime': 'Tiempo total de procesamiento: 23 segundos',
      'onboarding.credit.level': 'Nivel:',
      'onboarding.credit.excellent': 'Excelente',
      'onboarding.credit.good': 'Bueno',
      'onboarding.credit.regular': 'Regular',
      'onboarding.credit.low': 'Bajo',
      'onboarding.credit.verifiedIncome': 'Ingreso verificado:',
      'onboarding.credit.platformHistory': 'Historial plataforma:',
      'onboarding.credit.platformHistoryVal': '6+ meses',
      'onboarding.credit.of100': 'de 100',
      'onboarding.credit.perWeek': 'sem',
      'onboarding.timeline.request': 'Solicitud',
      'onboarding.timeline.documents': 'Documentos',
      'onboarding.timeline.ocrAi': 'OCR / AI',
      'onboarding.timeline.review': 'Revisión',
      'onboarding.timeline.decision': 'Decisión',
      'onboarding.toast.approved': '{name} aprobada — WhatsApp enviado',
      'onboarding.product.dae': 'empleado (DaE)',
      'onboarding.product.lto': 'Lease-to-Own (LTO)',
      'onboarding.trend.apps': '↑15% vs sem ant',
      'onboarding.trend.time': '↓13% vs sem ant',
      'onboarding.trend.auto': '↑4% vs sem ant',
      'onboarding.trend.pending': '↓8% vs sem ant',

      // ---- Roadmap ----
      'roadmap.title': 'AI Roadmap Interactivo',
      'roadmap.milestones': 'Hitos de Crecimiento',
      'roadmap.timeline': 'Timeline de Proyectos',
      'roadmap.trackAll': 'Todos',
      'roadmap.trackFoundation': 'Fundación (11)',
      'roadmap.trackDae': 'Driver-as-Employee (3)',
      'roadmap.trackLto': 'Lease-to-Own (2)',
      'roadmap.legend.foundation': 'Fundación',
      'roadmap.legend.dae': 'Driver-as-Employee',
      'roadmap.legend.lto': 'Lease-to-Own',
      'roadmap.vehicles': 'vehículos',
      'roadmap.clickHint': 'Click para ver detalles',
      'roadmap.enabler': 'Habilitador Crítico',
      'roadmap.baseFor': 'Base para {n} proyecto{plural} de Fase 1-2',
      'roadmap.infraCritical': 'Infraestructura crítica del stack',
      'roadmap.fullScale': 'A escala completa',
      'roadmap.perYear': '/año',
      'roadmap.month': 'Mes',
      'roadmap.detail.problem': 'Problema de Negocio',
      'roadmap.detail.deliverables': 'Entregables',
      'roadmap.detail.architecture': 'Arquitectura',
      'roadmap.detail.users': 'Usuarios Principales',
      'roadmap.detail.impact': 'Impacto Estimado',
      'roadmap.detail.benchmark': 'Benchmark Competitivo',

      // ---- Fleet Map ----
      'fleetmap.title': 'Mapa de Flota',
      'fleetmap.subtitle': 'Tracking en tiempo real de {n} vehículos',
      'fleetmap.kpi.active': 'Activos',
      'fleetmap.kpi.charging': 'Cargando',
      'fleetmap.kpi.maintenance': 'Mantenimiento',
      'fleetmap.kpi.fleetSoh': 'SOH Flota',
      'fleetmap.kpi.alerts': 'Alertas',
      'fleetmap.filter.layers': 'Capas',
      'fleetmap.filter.daeVehicles': 'Vehículos DaE',
      'fleetmap.filter.ltoVehicles': 'Vehículos LTO',
      'fleetmap.filter.centers': 'Centros LAFA',
      'fleetmap.filter.charging': 'Estaciones de Carga',
      'fleetmap.filter.sohOverlay': 'Overlay SOH',
      'fleetmap.filter.status': 'Estado',
      'fleetmap.filter.oem': 'Fabricante',
      'fleetmap.filter.sohRange': 'Rango SOH',
      'fleetmap.filter.soh95': '≥95% Excelente',
      'fleetmap.filter.soh90': '90–94% Bueno',
      'fleetmap.filter.soh85': '85–89% Atención',
      'fleetmap.filter.sohBelow': '<85% Crítico',
      'fleetmap.filter.vehicleCount': '{n} vehículos',
      'fleetmap.filter.vehicleCountFiltered': 'Mostrando {visible} de {total} vehículos',
      'fleetmap.filter.title': 'Filtros',
      'fleetmap.filter.reset': 'Limpiar',
      'fleetmap.popup.vehicle': 'Vehículo',
      'fleetmap.popup.driver': 'Conductor',
      'fleetmap.popup.model': 'Modelo',
      'fleetmap.popup.product': 'Producto',
      'fleetmap.popup.status': 'Estado',
      'fleetmap.popup.soh': 'SOH',
      'fleetmap.popup.revenue': 'Ingreso/Sem',
      'fleetmap.popup.platform': 'Plataforma',
      'fleetmap.popup.zone': 'Zona',
      'fleetmap.legend.dae': 'DaE',
      'fleetmap.legend.lto': 'LTO',
      'fleetmap.legend.center': 'Centro LAFA',
      'fleetmap.legend.chargingStation': 'Estación de Carga',
      'fleetmap.center.vallejo': 'Centro Vallejo',
      'fleetmap.center.granada': 'Centro Granada',
      'fleetmap.center.roma': 'Centro Roma',
      'fleetmap.mobileToggle': 'Filtros',

      // ---- Landing: Fleet Map tool card ----
      'landing.tools.fleetmap.title': 'Mapa de Flota',
      'landing.tools.fleetmap.desc': 'Mapa en tiempo real: 200 vehículos, filtros por producto/OEM/estado, overlay de salud de batería, 3 centros LAFA.',
      'landing.tools.fleetmap.stat': 'Visibilidad completa',
    },

    en: {
      // ---- Shared ----
      'shared.sidebar.roadmap': 'Roadmap',
      'shared.sidebar.dashboard': 'Dashboard',
      'shared.sidebar.collections': 'Collections',
      'shared.sidebar.battery': 'Batteries',
      'shared.sidebar.onboarding': 'Onboarding',
      'shared.sidebar.fleetmap': 'Fleet Map',
      'shared.sidebar.back': 'Back to LAFA',
      'shared.nav.home': 'Home',
      'shared.status.active': 'Active',
      'shared.status.maintenance': 'Maintenance',
      'shared.status.charging': 'Charging',
      'shared.status.idle': 'Idle',
      'shared.status.onTime': 'On time',
      'shared.status.late': 'Late',
      'shared.status.default': 'Default',
      'shared.time.today': 'Today',
      'shared.time.yesterday': 'Yesterday',
      'shared.time.daysAgo': '{n} days ago',
      'shared.time.weeksAgo': '{n} weeks ago',
      'shared.time.monthsAgo': '{n} month{plural} ago',
      'shared.weekAbbr': 'Wk {n}',
      'shared.notif.title': 'Notifications',
      'shared.notif.markAll': 'Mark all as read',
      'shared.notif.fleet.title': 'Utilization dropped to {pct}%',
      'shared.notif.fleet.desc': '{n} idle vehicles out of {total}.',
      'shared.notif.fleet.time': '3h ago',
      'shared.notif.payment.title': 'Collection renegotiated',
      'shared.notif.payment.desc': 'Carlos Mendoza accepted partial plan — $2,100 MXN received, $2,150 pending Monday.',
      'shared.notif.payment.time': '5h ago',
      'shared.notif.alert.title': '{n} battery anomalies',
      'shared.notif.alert.desc': '{id} worst case — SOH {soh}%. See diagnostics table.',
      'shared.notif.alert.time': '2h ago',
      'shared.notif.onboarding.title': 'New driver pending',
      'shared.notif.onboarding.desc': '{name} — documents to verify.',
      'shared.notif.onboarding.time': '6h ago',
      'shared.showing': 'Showing {from}–{to} of {total}',

      // ---- Landing page ----
      'landing.nav.problem': 'The Problem',
      'landing.nav.roadmap': 'Roadmap',
      'landing.nav.prototypes': 'Prototypes',
      'landing.nav.about': 'About Jose',
      'landing.nav.cta': 'View Roadmap',
      'landing.nav.mobileCta': 'View Demos',
      'landing.hero.eyebrow': 'AI Product Engineer — Internal Tools',
      'landing.hero.title': 'From Spreadsheets to Platform.<span class="block text-lafa-orange">In 9 Months.</span>',
      'landing.hero.titleText': 'From Spreadsheets to Platform.',
      'landing.hero.titleHighlight': 'In 9 Months.',
      'landing.hero.subtitle': 'LAFA manages 150 EVs with spreadsheets. Scaling to 2,000 requires a tech layer that doesn\'t exist today. I designed a roadmap of 16 projects across 3 tracks — and built 6 working prototypes to prove it.',
      'landing.hero.ctaPrimary': 'View the Roadmap',
      'landing.hero.ctaSecondary': 'Explore Prototypes',
      'landing.hero.imgAlt': 'LAFA electric vehicle',
      'landing.problem.eyebrow': 'The Problem',
      'landing.problem.title': 'Everything is Spreadsheets',
      'landing.problem.subtitle': 'LAFA starts from zero. Every process that needs to scale 15x in a year is manual today.',
      'landing.problem.card1.title': 'No Database',
      'landing.problem.card1.desc': 'Drivers, vehicles, payments, maintenance — all in separate spreadsheets. No source of truth. No dashboard.',
      'landing.problem.card2.title': 'Everything is Manual',
      'landing.problem.card2.desc': 'Onboarding takes 48+ hours. Collections requires one person per driver. Dispatch via WhatsApp groups. Maintenance untracked.',
      'landing.problem.card3.title': 'No Data to Decide',
      'landing.problem.card3.desc': 'Battery degradation unmeasured. Credit risk unevaluated. Charging costs unoptimized. Decisions by intuition.',
      'landing.roadmap.eyebrow': 'The Plan',
      'landing.roadmap.title': '3 Tracks. 16 Projects. 9 Months.',
      'landing.roadmap.subtitle': 'Infrastructure first. AI second. Every project moves a financial metric.',
      'landing.roadmap.foundation': 'Foundation',
      'landing.roadmap.dae': 'Driver-as-Employee',
      'landing.roadmap.lto': 'Lease-to-Own',
      'landing.roadmap.cta': 'Explore the Interactive Roadmap',
      'landing.roadmap.phase0': 'Phase 0 — Month 1-2',
      'landing.roadmap.phase1': 'Phase 1 — Month 3-5',
      'landing.roadmap.phase2': 'Phase 2 — Month 7-14',
      'landing.roadmap.milestone1': '300 EVs — Digital Foundation',
      'landing.roadmap.milestone2': '750 EVs — Scale',
      'landing.roadmap.milestone3': '1,500 EVs — Revenue Engine',
      'landing.roadmap.milestone4': '2,000 — Complete',
      'landing.roadmap.db': 'Relational database',
      'landing.roadmap.dashboardV1': 'Operations dashboard v1',
      'landing.roadmap.maint': 'Maintenance system',
      'landing.roadmap.shiftDisp': 'Shift dispatch',
      'landing.roadmap.acctStmt': 'Account statements',
      'landing.roadmap.incidents': 'Incident management',
      'landing.roadmap.insurance': 'Insurance integration',
      'landing.roadmap.hrPayroll': 'Payroll & attendance',
      'landing.roadmap.onboardAI': 'Automated onboarding',
      'landing.roadmap.batteryMon': 'Battery monitor',
      'landing.roadmap.collectionsBot': 'AI collections bot',
      'landing.roadmap.creditScore': 'Credit scoring',
      'landing.roadmap.chargingOpt': 'Charging optimization',
      'landing.roadmap.dashV2Docs': 'Dashboard v2, Docs, Knowledge',
      'landing.tools.eyebrow': 'Working Prototypes',
      'landing.tools.title': '1 Roadmap. 5 Working Prototypes.',
      'landing.tools.subtitle': 'Each prototype demonstrates a roadmap capability. Click to explore.',
      'landing.tools.open': 'Open',
      'landing.tools.roadmap.title': 'Interactive AI Roadmap',
      'landing.tools.roadmap.desc': 'Interactive timeline: 16 projects, architecture deep-dives, dependencies, growth milestones.',
      'landing.tools.roadmap.stat': '16 projects mapped',
      'landing.tools.dashboard.title': 'Fleet Dashboard',
      'landing.tools.dashboard.desc': '4 KPIs, revenue trends, fleet status by OEM, payment tracking, 150 mock drivers.',
      'landing.tools.dashboard.stat': 'Hours → ~10 seconds',
      'landing.tools.collections.title': 'WhatsApp Collections Bot',
      'landing.tools.collections.desc': 'WhatsApp simulation: 3 scenarios, AI intent classification, risk scoring, escalation.',
      'landing.tools.collections.stat': '8–10 agents → 2–3',
      'landing.tools.battery.title': 'Battery Monitor',
      'landing.tools.battery.desc': 'SOH heatmap, degradation projection, charge patterns, anomaly detection, residual value.',
      'landing.tools.battery.stat': 'Protects MXN $60–80M',
      'landing.tools.onboarding.title': 'Driver Onboarding',
      'landing.tools.onboarding.desc': 'Kanban pipeline, OCR document verification, credit scoring, WhatsApp flow.',
      'landing.tools.onboarding.stat': '48 hours → ~7 minutes',

      // ---- Fleet Intelligence section ----
      'landing.nav.fleetIntel': 'Fleet Intelligence',
      'landing.fi.eyebrow': 'Working Product',
      'landing.fi.title': 'Fleet Intelligence MVP',
      'landing.fi.subtitle': 'Production fleet management app: shifts, payroll, drivers, vehicles, RBAC — built with React, TypeScript, and Supabase.',
      'landing.fi.stat.drivers': 'drivers',
      'landing.fi.stat.vehicles': 'vehicles',
      'landing.fi.stat.centers': 'centers',
      'landing.fi.feat.dashboard': 'Real-time operations dashboard',
      'landing.fi.feat.payroll': 'Automated payroll calculation',
      'landing.fi.feat.shifts': 'Shift management with check-in/out',
      'landing.fi.feat.rbac': 'Role-based access control (RBAC)',
      'landing.fi.feat.csv': 'Bulk CSV import',
      'landing.fi.cta': 'Try Live Demo',
      'landing.fi.credentials': 'admin@lafa.mx / admin123',
      'landing.fi.tab.dashboard': 'Dashboard',
      'landing.fi.tab.shifts': 'Shifts',
      'landing.fi.tab.payroll': 'Payroll',

      'landing.about.eyebrow': 'The Builder',
      'landing.about.title': 'Jose Diaz',
      'landing.about.subtitle': 'Product + AI + Fast Execution',
      'landing.about.yape.title': 'Yape — AI at Scale',
      'landing.about.yape.desc': 'AI classification pipeline: 300K WhatsApp conversations/month. Error reduced from 30% to 10%. Full pipeline from data strategy to production.',
      'landing.about.jokr.title': 'JOKR — Internal Tools & Data',
      'landing.about.jokr.desc': 'PM at JOKR Peru — Consumer App & Internal Tools at delivery unicorn ($260M Series B). Led Data Warehouse migration (Snowflake → BigQuery) with Data Engineers. MarTech integration (GA, Adjust, Salesforce, Talon.One).',
      'landing.about.numa.title': 'NUMA — Full-Stack Builder',
      'landing.about.numa.desc': 'AI health assistant built solo from scratch. Product design, backend, AI integration, deploy. Not a deck — a working product.',
      'landing.about.facts': 'Key Facts',
      'landing.about.education': 'Education',
      'landing.about.educationVal': 'Business Administration (UP)',
      'landing.about.current': 'Current',
      'landing.about.currentVal': 'Product Owner at Yape',
      'landing.about.ai': 'AI',
      'landing.about.aiVal': 'Reforge AI Leadership & Strategy (2025)',
      'landing.about.stack': 'Stack',
      'landing.about.stackVal': 'Claude Code, Supabase, Vercel, PostHog, Linear, Cursor',
      'landing.about.quote': '"Taste is the bottleneck when AI can generate unlimited options" — Lenny Rachitsky',
      'landing.cta.title': 'Ready to Leave Spreadsheets Behind?',
      'landing.cta.subtitle': 'Explore the roadmap, try the prototypes, or let\'s talk.',
      'landing.cta.primary': 'View the Roadmap',
      'landing.cta.secondary': 'Message Me',
      'landing.footer.credit': 'Made by Jose Diaz · February 2026',
      'landing.footer.context': 'Research and prototypes for the AI Product Engineer role at LAFA',

      // ---- Dashboard ----
      'dashboard.title': 'Operations Dashboard',
      'dashboard.kpi.vehicles': 'Active Vehicles',
      'dashboard.kpi.vehiclesTrend': '+8 this week',
      'dashboard.kpi.revenue': 'Weekly Revenue',
      'dashboard.kpi.revenueTrend': '+12.3%',
      'dashboard.kpi.utilization': 'Fleet Utilization',
      'dashboard.kpi.payments': 'Payments On Time',
      'dashboard.chart.revenue': 'Weekly Revenue (12 weeks)',
      'dashboard.chart.fleetStatus': 'Fleet Status',
      'dashboard.chart.payments': 'Payment Status (12 weeks)',
      'dashboard.chart.oem': 'Distribution by Manufacturer',
      'dashboard.chart.total': 'Total',
      'dashboard.filter.allOem': 'All OEM',
      'dashboard.filter.allProducts': 'All Products',
      'dashboard.filter.allStatus': 'All Status',
      'dashboard.filter.active': 'Active',
      'dashboard.filter.maintenance': 'Maintenance',
      'dashboard.filter.charging': 'Charging',
      'dashboard.filter.idle': 'Idle',
      'dashboard.search': 'Search driver or vehicle...',
      'dashboard.export': 'Export',
      'dashboard.table.id': 'ID',
      'dashboard.table.driver': 'Driver',
      'dashboard.table.oem': 'OEM',
      'dashboard.table.product': 'Product',
      'dashboard.table.status': 'Status',
      'dashboard.table.platform': 'Platform',
      'dashboard.table.revenue': 'Rev/Wk',
      'dashboard.table.soh': 'SOH',
      'dashboard.detail.driver': 'Driver',
      'dashboard.detail.vehicle': 'Vehicle',
      'dashboard.detail.product': 'Product',
      'dashboard.detail.since': 'Since',
      'dashboard.detail.rating': 'Rating',
      'dashboard.detail.trips': 'Trips',
      'dashboard.detail.oem': 'OEM',
      'dashboard.detail.model': 'Model',
      'dashboard.detail.status': 'Status',
      'dashboard.detail.soh': 'SOH',
      'dashboard.detail.cycles': 'Cycles',
      'dashboard.detail.avgTemp': 'Avg Temp',
      'dashboard.detail.weeklyRev': 'Weekly Revenue',
      'dashboard.detail.lastPayment': 'Last payment',
      'dashboard.detail.payHistory': 'Payment History (last 8 wks)',
      'dashboard.detail.weekLabel': 'Wk {n}',
      'dashboard.table.showing': 'Showing {start}–{end} of {total}',
      'dashboard.donut.active': 'Active',
      'dashboard.donut.maintenance': 'Maintenance',
      'dashboard.donut.charging': 'Charging',
      'dashboard.donut.idle': 'Idle',
      'dashboard.series.onTime': 'On time',
      'dashboard.series.late': 'Late',
      'dashboard.series.default': 'Default',

      // ---- Battery ----
      'battery.title': 'Battery Monitor',
      'battery.kpi.avgSoh': 'Average SOH',
      'battery.kpi.anomalies': 'Anomalies',
      'battery.kpi.avgTemp': 'Average Temp',
      'battery.kpi.avgCycles': 'Average Cycles',
      'battery.filter.allOem': 'All OEM',
      'battery.filter.allProducts': 'All Products',
      'battery.filter.sortId': 'Sort by ID',
      'battery.filter.sortSoh': 'Sort by SOH',
      'battery.filter.sortCycles': 'Sort by Cycles',
      'battery.heatmap.title': 'Fleet Health Map',
      'battery.heatmap.sohLabel': 'SOH:',
      'battery.heatmap.cycles': '{n} cycles',
      'battery.detail.degradation': 'Degradation Curve',
      'battery.detail.chargePattern': 'Charge Pattern (30 days)',
      'battery.detail.vehicleInfo': 'Vehicle Information',
      'battery.detail.projections': 'AI Projections',
      'battery.detail.recommendations': 'Recommendations',
      'battery.detail.vehicle': 'Vehicle',
      'battery.detail.oemModel': 'OEM / Model',
      'battery.detail.driver': 'Driver',
      'battery.detail.product': 'Product',
      'battery.detail.status': 'Status',
      'battery.detail.currentSoh': 'Current SOH',
      'battery.detail.cycles': 'Cycles',
      'battery.detail.avgTemp': 'Average Temp',
      'battery.detail.projSoh48': 'Projected SOH (48 months)',
      'battery.detail.usefulLife': 'Estimated useful life',
      'battery.detail.residualValue': 'Battery residual value',
      'battery.detail.secondLife': 'Second life viable',
      'battery.detail.yes': 'Yes',
      'battery.detail.evaluate': 'Evaluate',
      'battery.detail.years68': '6-8 years',
      'battery.detail.years45': '4-5 years',
      'battery.chart.fleetAvg': 'Fleet average',
      'battery.chart.lfpExpected': 'Expected LFP (CDMX)',
      'battery.chart.months': 'Months',
      'battery.chart.day': 'Day',
      'battery.chart.charge': 'Charge (kWh)',
      'battery.chart.today': 'Today',
      'battery.anomaly.title': 'Anomaly Alerts',
      'battery.anomaly.priority': 'Priority',
      'battery.anomaly.vehicle': 'Vehicle',
      'battery.anomaly.alert': 'Alert',
      'battery.anomaly.soh': 'SOH',
      'battery.anomaly.expected': 'Expected',
      'battery.anomaly.deviation': 'Deviation',
      'battery.anomaly.action': 'Action',
      'battery.anomaly.critical': 'Critical',
      'battery.anomaly.high': 'High',
      'battery.anomaly.medium': 'Medium',
      'battery.anomaly.degradation': 'Accelerated degradation detected',
      'battery.anomaly.diagnose': 'Diagnose',
      'battery.rec.fullDiag': 'Schedule complete battery diagnostic',
      'battery.rec.chargePattern': 'Review charge pattern — avoid fast charging during peak hours',
      'battery.rec.highCycles': 'Monitor accelerated degradation due to high cycling',
      'battery.rec.optimal': 'Battery in optimal range. Continue standard monitoring.',

      // ---- Collections ----
      'collections.title': 'WhatsApp Collections Bot',
      'collections.scenario.cooperative': 'Cooperative',
      'collections.scenario.cooperativeDesc': 'Wants to pay, asks for time',
      'collections.scenario.evasive': 'Evasive',
      'collections.scenario.evasiveDesc': 'Reads but doesn\'t reply',
      'collections.scenario.unresponsive': 'Unresponsive',
      'collections.scenario.unresponsiveDesc': 'Ignores all messages',
      'collections.chat.botActive': 'Automatic bot active...',
      'collections.agent.daysOverdue': 'Days overdue',
      'collections.agent.amountOwed': 'Amount owed',
      'collections.agent.rating': 'Platform rating',
      'collections.agent.escalation': 'Escalation',
      'collections.agent.intentTitle': 'Intent (AI)',
      'collections.agent.detected': 'Detected',
      'collections.agent.waiting': 'Waiting for message...',
      'collections.agent.actionLabel': 'Action',
      'collections.agent.noAction': '—',
      'collections.agent.approve': 'Approve',
      'collections.agent.escalate': 'Escalate',
      'collections.agent.legalReview': 'Legal Rev.',
      'collections.agent.payHistory': 'Payment History',
      'collections.risk.low': 'Low Risk',
      'collections.risk.medHigh': 'Medium-High Risk',
      'collections.risk.high': 'High Risk',
      'collections.daysDelay': '{n} days overdue',
      'collections.weekLabel': 'Wk {n}',
      'collections.escalation.pre2': 'Day -2',
      'collections.escalation.day0': 'Day 0',
      'collections.escalation.day7': '+7',
      'collections.escalation.day14': '+14',
      'collections.escalation.legal': 'Legal',

      // ---- Onboarding ----
      'onboarding.title': 'Driver Onboarding',
      'onboarding.kpi.apps': 'Applications This Week',
      'onboarding.kpi.time': 'Average Time',
      'onboarding.kpi.auto': 'Auto-Approved',
      'onboarding.kpi.pending': 'Pending',
      'onboarding.filter.all': 'All',
      'onboarding.search': 'Search driver...',
      'onboarding.col.pending': 'Pending',
      'onboarding.col.review': 'In Review',
      'onboarding.col.verified': 'Verified',
      'onboarding.col.approved': 'Approved',
      'onboarding.empty': 'No drivers in this stage',
      'onboarding.docs': 'docs',
      'onboarding.doc.ine': 'INE',
      'onboarding.doc.license': 'License',
      'onboarding.doc.address': 'Proof of Address',
      'onboarding.doc.rfc': 'RFC',
      'onboarding.doc.screenshot': 'Screenshot',
      'onboarding.modal.docs': 'Documents',
      'onboarding.modal.waChat': 'WhatsApp Conversation',
      'onboarding.modal.ocr': 'AI Extraction (OCR)',
      'onboarding.modal.credit': 'Alternative Credit Score',
      'onboarding.modal.timeline': 'Timeline',
      'onboarding.modal.complete': 'Verification complete — 23 seconds',
      'onboarding.modal.replay': '↻ Replay',
      'onboarding.modal.withAI': 'with AI',
      'onboarding.modal.oldProcess': 'old process',
      'onboarding.wa.greeting': 'Hi {name}! Welcome to the LAFA onboarding process. I\'m the automated assistant.',
      'onboarding.wa.docList': 'For your application as a {product} driver, we need:\n1. INE\n2. License\n3. Proof of Address\n4. RFC\n5. DiDi Screenshot',
      'onboarding.wa.driverReply': 'Sure, give me a moment',
      'onboarding.wa.verified': '{doc} verified ✓',
      'onboarding.wa.allDone': 'All documents verified! Your application is complete.',
      'onboarding.ocr.processing': 'Processing with AI...',
      'onboarding.ocr.extracting': 'Extracting fields from INE',
      'onboarding.ocr.ineTitle': 'INE / Voter ID',
      'onboarding.ocr.name': 'Name',
      'onboarding.ocr.curp': 'CURP',
      'onboarding.ocr.address': 'Address',
      'onboarding.ocr.validity': 'Validity',
      'onboarding.ocr.confidence': '{n}% confidence',
      'onboarding.ocr.validation': 'AI Validation',
      'onboarding.ocr.authentic': 'Authentic document',
      'onboarding.ocr.valid': 'VALID',
      'onboarding.ocr.curpValidated': 'CURP validated (RENAPO)',
      'onboarding.ocr.faceMatch': 'Photo/face match',
      'onboarding.ocr.blacklist': 'Blacklist',
      'onboarding.ocr.clean': 'CLEAN',
      'onboarding.ocr.ltoTitle': 'Financial Assessment (LTO)',
      'onboarding.ocr.verifiedIncome': 'Verified income (Palenca)',
      'onboarding.ocr.altCredit': 'Alternative credit score',
      'onboarding.ocr.payCapacity': 'Payment capacity',
      'onboarding.ocr.approved': 'APPROVED',
      'onboarding.ocr.autoApproved': 'Verification complete — Auto-approved',
      'onboarding.ocr.processTime': 'Total processing time: 23 seconds',
      'onboarding.credit.level': 'Level:',
      'onboarding.credit.excellent': 'Excellent',
      'onboarding.credit.good': 'Good',
      'onboarding.credit.regular': 'Fair',
      'onboarding.credit.low': 'Low',
      'onboarding.credit.verifiedIncome': 'Verified income:',
      'onboarding.credit.platformHistory': 'Platform history:',
      'onboarding.credit.platformHistoryVal': '6+ months',
      'onboarding.credit.of100': 'of 100',
      'onboarding.credit.perWeek': 'wk',
      'onboarding.timeline.request': 'Application',
      'onboarding.timeline.documents': 'Documents',
      'onboarding.timeline.ocrAi': 'OCR / AI',
      'onboarding.timeline.review': 'Review',
      'onboarding.timeline.decision': 'Decision',
      'onboarding.toast.approved': '{name} approved — WhatsApp sent',
      'onboarding.product.dae': 'employee (DaE)',
      'onboarding.product.lto': 'Lease-to-Own (LTO)',
      'onboarding.trend.apps': '↑15% vs prev week',
      'onboarding.trend.time': '↓13% vs prev week',
      'onboarding.trend.auto': '↑4% vs prev week',
      'onboarding.trend.pending': '↓8% vs prev week',

      // ---- Roadmap ----
      'roadmap.title': 'Interactive AI Roadmap',
      'roadmap.milestones': 'Growth Milestones',
      'roadmap.timeline': 'Project Timeline',
      'roadmap.trackAll': 'All',
      'roadmap.trackFoundation': 'Foundation (11)',
      'roadmap.trackDae': 'Driver-as-Employee (3)',
      'roadmap.trackLto': 'Lease-to-Own (2)',
      'roadmap.legend.foundation': 'Foundation',
      'roadmap.legend.dae': 'Driver-as-Employee',
      'roadmap.legend.lto': 'Lease-to-Own',
      'roadmap.vehicles': 'vehicles',
      'roadmap.clickHint': 'Click for details',
      'roadmap.enabler': 'Critical Enabler',
      'roadmap.baseFor': 'Foundation for {n} Phase 1-2 project{plural}',
      'roadmap.infraCritical': 'Critical stack infrastructure',
      'roadmap.fullScale': 'At full scale',
      'roadmap.perYear': '/year',
      'roadmap.month': 'Month',
      'roadmap.detail.problem': 'Business Problem',
      'roadmap.detail.deliverables': 'Deliverables',
      'roadmap.detail.architecture': 'Architecture',
      'roadmap.detail.users': 'Primary Users',
      'roadmap.detail.impact': 'Estimated Impact',
      'roadmap.detail.benchmark': 'Competitive Benchmark',

      // ---- Fleet Map ----
      'fleetmap.title': 'Fleet Map',
      'fleetmap.subtitle': 'Real-time tracking of {n} vehicles',
      'fleetmap.kpi.active': 'Active',
      'fleetmap.kpi.charging': 'Charging',
      'fleetmap.kpi.maintenance': 'Maintenance',
      'fleetmap.kpi.fleetSoh': 'Fleet SOH',
      'fleetmap.kpi.alerts': 'Alerts',
      'fleetmap.filter.layers': 'Layers',
      'fleetmap.filter.daeVehicles': 'DaE Vehicles',
      'fleetmap.filter.ltoVehicles': 'LTO Vehicles',
      'fleetmap.filter.centers': 'LAFA Centers',
      'fleetmap.filter.charging': 'Charging Stations',
      'fleetmap.filter.sohOverlay': 'SOH Overlay',
      'fleetmap.filter.status': 'Status',
      'fleetmap.filter.oem': 'Manufacturer',
      'fleetmap.filter.sohRange': 'SOH Range',
      'fleetmap.filter.soh95': '≥95% Excellent',
      'fleetmap.filter.soh90': '90–94% Good',
      'fleetmap.filter.soh85': '85–89% Watch',
      'fleetmap.filter.sohBelow': '<85% Critical',
      'fleetmap.filter.vehicleCount': '{n} vehicles',
      'fleetmap.filter.vehicleCountFiltered': 'Showing {visible} of {total} vehicles',
      'fleetmap.filter.title': 'Filters',
      'fleetmap.filter.reset': 'Clear',
      'fleetmap.popup.vehicle': 'Vehicle',
      'fleetmap.popup.driver': 'Driver',
      'fleetmap.popup.model': 'Model',
      'fleetmap.popup.product': 'Product',
      'fleetmap.popup.status': 'Status',
      'fleetmap.popup.soh': 'SOH',
      'fleetmap.popup.revenue': 'Rev/Wk',
      'fleetmap.popup.platform': 'Platform',
      'fleetmap.popup.zone': 'Zone',
      'fleetmap.legend.dae': 'DaE',
      'fleetmap.legend.lto': 'LTO',
      'fleetmap.legend.center': 'LAFA Center',
      'fleetmap.legend.chargingStation': 'Charging Station',
      'fleetmap.center.vallejo': 'Vallejo Center',
      'fleetmap.center.granada': 'Granada Center',
      'fleetmap.center.roma': 'Roma Center',
      'fleetmap.mobileToggle': 'Filters',

      // ---- Landing: Fleet Map tool card ----
      'landing.tools.fleetmap.title': 'Fleet Map',
      'landing.tools.fleetmap.desc': 'Real-time map: 200 vehicles, product/OEM/status filters, battery health overlay, 3 LAFA centers.',
      'landing.tools.fleetmap.stat': 'Full visibility',
    }
  };

  // ---------- Translation Engine ----------
  function t(key, params) {
    let str = (I18N[currentLang] && I18N[currentLang][key]) || I18N.es[key] || key;
    if (params) {
      Object.keys(params).forEach(k => {
        str = str.replace(new RegExp('\\{' + k + '\\}', 'g'), params[k]);
      });
    }
    return str;
  }

  // ---------- DOM Sweep ----------
  function sweepDOM() {
    document.querySelectorAll('[data-i18n]').forEach(el => {
      el.textContent = t(el.dataset.i18n);
    });
    document.querySelectorAll('[data-i18n-html]').forEach(el => {
      el.innerHTML = t(el.dataset.i18nHtml);
    });
    document.querySelectorAll('[data-i18n-placeholder]').forEach(el => {
      el.placeholder = t(el.dataset.i18nPlaceholder);
    });
  }

  // ---------- Switch Language ----------
  function switchLang(lang) {
    if (lang === currentLang) return;
    currentLang = lang;
    try { localStorage.setItem(STORAGE_KEY, lang); } catch (_) {}
    document.documentElement.lang = lang;
    sweepDOM();
    updateToggleUI();
    window.dispatchEvent(new Event('langchange'));
  }

  // ---------- Toggle UI ----------
  function updateToggleUI() {
    document.querySelectorAll('.lang-toggle').forEach(toggle => {
      const esBtn = toggle.querySelector('[data-lang="es"]');
      const enBtn = toggle.querySelector('[data-lang="en"]');
      if (esBtn && enBtn) {
        esBtn.className = `lang-btn cursor-pointer text-sm transition-colors ${currentLang === 'es' ? 'text-white font-semibold' : 'text-gray-500 hover:text-gray-300'}`;
        enBtn.className = `lang-btn cursor-pointer text-sm transition-colors ${currentLang === 'en' ? 'text-white font-semibold' : 'text-gray-500 hover:text-gray-300'}`;
      }
    });
  }

  function createToggleHTML() {
    return `<div class="lang-toggle flex items-center gap-1.5">
      <span class="lang-btn cursor-pointer text-sm ${currentLang === 'es' ? 'text-white font-semibold' : 'text-gray-500 hover:text-gray-300'} transition-colors" data-lang="es">ES</span>
      <span class="text-gray-600 text-xs">|</span>
      <span class="lang-btn cursor-pointer text-sm ${currentLang === 'en' ? 'text-white font-semibold' : 'text-gray-500 hover:text-gray-300'} transition-colors" data-lang="en">EN</span>
    </div>`;
  }

  function bindToggleEvents(container) {
    container.querySelectorAll('.lang-btn').forEach(btn => {
      btn.addEventListener('click', () => switchLang(btn.dataset.lang));
    });
  }

  // Insert toggle into a container element
  function initLangToggle(containerEl) {
    if (!containerEl) return;
    containerEl.innerHTML = createToggleHTML();
    bindToggleEvents(containerEl);
  }

  // ---------- Local Field Helper (for bilingual data objects) ----------
  function localField(obj, field) {
    if (currentLang === 'en' && obj[field + '_en']) return obj[field + '_en'];
    return obj[field];
  }

  // ---------- Init ----------
  document.documentElement.lang = currentLang;

  // ---------- Export ----------
  window.I18N_LANG = currentLang;
  window.t = t;
  window.sweepDOM = sweepDOM;
  window.switchLang = switchLang;
  window.initLangToggle = initLangToggle;
  window.localField = localField;
  window.createLangToggleHTML = createToggleHTML;
  window.bindLangToggleEvents = bindToggleEvents;
  window.getLang = function () { return currentLang; };

  // Keep I18N_LANG in sync
  Object.defineProperty(window, 'I18N_LANG', {
    get() { return currentLang; },
    set(v) { if (v !== currentLang) switchLang(v); }
  });
})();
